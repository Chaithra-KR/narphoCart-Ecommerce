<%-include("../admin/layouts/header.ejs") %>

<section class="col-lg-8 pt-lg-4 pb-4 mb-3">

<div class="container-fluid d-flex justify-content-center align-items-center " style="height: 100%; width: 100%;margin-right: 10%;">
    <div class="col-md-6 pt-4 mt-3 mt-md-0  me-5" style="width: 100%;">
        <h2 class="h4 mb-3 d-flex justify-content-center">Edit Image</h2>
        <div class="container-fluid d-flex justify-content-end">
            <button  type="button" class="btn btn-success" data-toggle="modal" data-target="#exampleModalCenter">
                New image
            </button>
            <!-- <a  href="/admin/updateProductImage" class="btn btn-success mb-3 btn-sm d-flex align-items-center justify-content-center" style="width: 70px;height: 30px; font-size: 10px;">Add Image</a> -->
        </div>
        <form action="/admin/editImage?id=<%=productDatas._id%>" method="post" enctype="multipart/form-data" style="margin-left: 50px; margin-right: 50px;" class="needs-validation row g-4" novalidate>

            <div class="mb-3">

               <% productDatas.image.forEach((element,i) => { %>
                
                <img src="/images/<%=productDatas.image[i]%>"  style="width: 120px; height: auto;">
                <input class="form-control" type="file" name="image" value="<%=productDatas.image%>" accept="image/*"  >
               
                <% }) %>
                
            </div>       
          
            <div class="col-12 d-flex mt-4" style="justify-content: flex-end; margin-bottom: 20px;">
                <button class="btn btn-warning" style="width: 100px;margin-left: 12px;" type="submit">Update</button>
            </div>


        </form>
        <div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="exampleModalLongTitle">Add new Image</h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <div class="modal-body">
                  <form action="/admin/editproduct?id=<%=productDatas._id%>" method="post" enctype="multipart/form-data">
          
                  <input type="hidden" name="id" value="<%= productDatas._id %>"></div>
                  <input type="file" name="image" class="form-control"  >
                  <button style="margin-top: 10px;" type="submit" class="btn btn-primary">SAVE THE IMAGE</button>
          
                </div>
             
              </form>
             </div>
          </div>
    </div>

</div>

<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>

</section>
